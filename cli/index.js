#!/usr/bin/env node
import{$ as D} from"zx";import{exec as L} from"child_process";import{writeFileSync as K} from"node:fs";function A(b,q){K(b,q)}var E=!1;try{await D`cspell --version`,E=!0}catch(b){console.error("cSpell is not installed. Please install with your package manager."),console.info("Hint: npm install -g cspell@latest")}var M=await D`pwd`,g=String(M.stdout.split("/").slice(-1)[0]).trim(),O={$schema:"https://raw.githubusercontent.com/streetsidesoftware/cspell/main/cspell.schema.json",version:"0.2",language:"en",globRoot:".",dictionaryDefinitions:[{name:g,path:`./${g}.txt`,addWords:!0}],dictionaries:[g],ignorePaths:["node_modules",`/${g}.txt`]};A(`./${g}.txt`,"");A("./cspell.json",JSON.stringify(O,null,2));var Q=`${E?"":"npx "}cspell --words-only --unique --no-progress --show-context "**/**/*.md" "**/**/*.ts" "**/**/*.json"`,G=await new Promise((b)=>{L(Q,(q,B)=>{if(q)console.error(`Error running cspell: ${q}`);const H=B?B.split("\n").filter((J)=>J):[];b(H)})});console.log(`Found ${G.length} unknown words.`);A(`./${g}.txt`,G.join("\n"));console.log("cSpell setup completed.");process.exit(0);
